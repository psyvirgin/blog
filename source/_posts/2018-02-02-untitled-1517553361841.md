---
title: hexoåšå®¢è‡ªåŠ¨å¤‡ä»½
tags: []
categories: []
date: 2018-02-02 14:55:54
permalink:
---

#### å®ç°hexoåšå®¢å‘å¸ƒåè‡ªåŠ¨å¤‡ä»½åˆ°github
ä¹‹å‰ä»‹ç»è¿‡***ä½¿ç”¨githubå®ç°å¤šç»ˆç«¯éƒ¨ç½²åšå®¢åˆ°æœåŠ¡å™¨***ï¼Œåœ°å€åœ¨è¿™é‡Œï¼šhttps://www.jhswsj.com/2017/12/31/untitled-1514707533949/ 
è¿™æ ·çš„å¥½å¤„æ˜¯æ¢äº†ç”µè„‘è¿˜æ˜¯å¯ä»¥ç»§ç»­æ›´æ–°åšå®¢ï¼Œé˜²æ­¢åšå®¢æ¢å°ç”µè„‘å°±ä¸èƒ½ç¼–è¾‘äº†ã€‚
ä½†æ˜¯ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œæ¯æ¬¡æ›´æ–°éœ€è¦æ‰‹åŠ¨å¤‡ä»½ï¼Œåœ¨googleé‡Œæ‰¾åˆ°ä¸€äº›åˆ©ç”¨ç¬¬ä¸‰æ–¹ä»“åº“æ¥è‡ªåŠ¨å¤‡ä»½çš„æ–¹æ³•ï¼Œçœ‹æ•™ç¨‹çœ‹åˆ°å¤´ç–¼ï¼Œå¥½éº»çƒ¦
ä»Šå¤©ä»‹ç»è‡ªåŠ¨æœ¬åœ°è‡ªåŠ¨å¤‡ä»½åˆ°
***è§£å†³ä¸Šè¿°éš¾é¢˜***

<!-- more -->

##### åŸç†
åˆ©ç”¨nodejsåˆ°æ—¶é—´ç›‘å¬æœºåˆ¶ ***deployAfter***
##### å®ç°
##### 1.å‰æ
å°†HexoåŠ å…¥Gitä»“åº“å¹¶ä¸Githubè¿œç¨‹ä»“åº“ç»‘å®šï¼Œè§ä¸Šé¢çš„ğŸ”—æ•™ç¨‹
##### 2.å®‰è£…shelljs
```bash
$ npm install --save shelljs
```
å¦‚æŠ¥é”™ï¼Œpermission denied,æƒé™ä¸å¤Ÿï¼Œæ¢æˆsudo npm install --save shelljs
##### 3.è‡ªåŠ¨å¤‡ä»½è„šæœ¬
åœ¨hexo***æ ¹ç›®å½•***çš„scriptsæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œå¦‚æ²¡æœ‰scriptsæ–‡ä»¶å¤¹å°±æ–°å»ºä¸€ä¸ª
```bash
$ vim auto_backup.js
```
å†™å…¥ä¸€ä¸‹å†…å®¹
```bash
require('shelljs/global');

try {
	hexo.on('deployAfter', function() {//å½“deployå®Œæˆåæ‰§è¡Œå¤‡ä»½
		run();
	});
} catch (e) {
	console.log("äº§ç”Ÿäº†ä¸€ä¸ªé”™è¯¯<(ï¿£3ï¿£)> !ï¼Œé”™è¯¯è¯¦æƒ…ä¸ºï¼š" + e.toString());
}

function run() {
	if (!which('git')) {
		echo('Sorry, this script requires git');
		exit(1);
	} else {
		echo("======================Auto Backup Begin===========================");
		cd('D:/hexo');    //æ­¤å¤„ä¿®æ”¹ä¸ºHexoæ ¹ç›®å½•è·¯å¾„
		if (exec('git add --all').code !== 0) {
			echo('Error: Git add failed');
			exit(1);

		}
		if (exec('git commit -am "Form auto backup script\'s commit"').code !== 0) {
			echo('Error: Git commit failed');
			exit(1);

		}
		if (exec('git push origin master').code !== 0) {
			echo('Error: Git push failed');
			exit(1);

		}
		echo("==================Auto Backup Complete============================")
	}
}
```
#### æ³¨æ„è„šæœ¬é‡Œé¢çš„æ–‡ä»¶è·¯å¾„ä¿®æ”¹æˆä½ çš„åšå®¢æºç›®å½•çš„ç»å¯¹è·¯å¾„

###### æœ¬æ–‡è½¬çš„è¿™ä½åŒå­¦
https://notes.wanghao.work/2015-07-06-%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BDHexo%E5%8D%9A%E5%AE%A2%E6%BA%90%E6%96%87%E4%BB%B6.html
